// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model khachhang {
  id              Int @id @default(autoincrement())
  ma_khach_hang   String
  ten             String
  ngay_sinh       DateTime
  gioi_tinh       String
  que_quan        String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  phieutiems      phieutiem[]
}

model quyen {
  id              Int @id @default(autoincrement())
  ten             String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  nhanviens       nhanvien[]
}

model nhanvien {
  id              Int @id @default(autoincrement())
  ten             String
  ngay_sinh       DateTime
  avata           String
  bang_cap        String
  dia_chi         String
  sdt             String
  username        String
  password        String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  role            quyen?    @relation(fields: [id_quyen], references: [id])
  id_quyen        Int?
  phieutiems      phieutiem[]
}

model dichvu {
  id              Int @id @default(autoincrement())
  ten             String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
}

model phongbenh {
  id              Int @id @default(autoincrement())
  ten             String
  nguyen_nhan     String
  trieu_chung     String
  phong_ngua      String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  thuocs          thuoc[]
}

model thuoc {
  id              Int @id @default(autoincrement())
  ten             String
  so_luong        Int
  ngay_san_xuat   DateTime
  han_su_dung     DateTime
  so_lo           String
  duong_tiem      String
  bao_quan        String
  doi_tuong       String
  gia_ban_le      Float
  gia_dat_mua     Float
  nuoc_san_xuat   String
  tinh_trang      String
  phong           phongbenh?    @relation(fields: [id_phong_benh], references: [id])
  id_phong_benh   Int?
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
}

model trangthai{
  id              Int @id @default(autoincrement())
  ten             String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  phieutiems      phieutiem[]
}

model phieutiem {
  id              Int @id @default(autoincrement())
  khachhang       khachhang?    @relation(fields: [id_khach_hang], references: [id])  
  nhanvien        nhanvien?     @relation(fields: [id_nhan_vien],  references: [id])
  trangthai       trangthai?    @relation(fields: [id_trang_thai], references: [id])
  id_khach_hang   Int
  doi_tuong       String
  id_dich_vu1     Int
  id_dich_vu2     Int
  id_thuoc1       Int
  id_thuoc2       Int
  id_nhan_vien    Int
  id_trang_thai   Int
  phong_benh1     String
  phong_benh2     String
  ten_thuoc1      String
  ten_thuoc2      String
  tong_tien       Float
  trang_thai      String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
}

model loaithietbivattu {
  id              Int @id @default(autoincrement())
  ten             String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  thietbivattus   thietbivattu[]
}

model thietbivattu{
  id                        Int @id @default(autoincrement())
  ten                       String
  so_luong                  Int
  don_vi_tinh               String
  loaithietbivattu          loaithietbivattu?    @relation(fields: [id_loai_thiet_bi_vat_tu], references: [id])
  id_loai_thiet_bi_vat_tu   Int
  create_at                 DateTime
  update_at                 DateTime
  id_created                Int
  id_updated                Int
  delete_flag               Int
  oldid                     Int
}

model nhapkho {
  id              Int @id @default(autoincrement())
  loai_san_pham   String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  chitietnhapkhos chitietnhapkho[]
}

model chitietnhapkho {
  id                Int @id @default(autoincrement())
  nhapkho           nhapkho?    @relation(fields: [id_phieu_nhap_kho], references: [id])
  id_phieu_nhap_kho Int
  id_san_pham       Int
  so_luong          Int
  create_at         DateTime
  update_at         DateTime
  id_created        Int
  id_updated        Int
  delete_flag       Int
  oldid             Int
}

model xuatkho {
  id              Int @id @default(autoincrement())
  loai_san_pham   String
  create_at       DateTime
  update_at       DateTime
  id_created      Int
  id_updated      Int
  delete_flag     Int
  oldid           Int
  chitietxuatkhos chitietxuatkho[]
}

model chitietxuatkho {
  id                Int @id @default(autoincrement())
  xuatkho           xuatkho?    @relation(fields: [id_phieu_xuat_kho], references: [id])
  id_phieu_xuat_kho Int
  id_san_pham       Int
  so_luong          Int
  create_at         DateTime
  update_at         DateTime
  id_created        Int
  id_updated        Int
  delete_flag       Int
  oldid             Int
}

model token {
  id              Int @id @default(autoincrement())
  id_employee     Int
  data            String
  date            DateTime
  role            Int
}
